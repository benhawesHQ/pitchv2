<!DOCTYPE html>
<html>
<head>
  <title>Pitch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>

    body {
      margin: 0;
      background: #0b0b0b;
      color: white;
      font-family: 'Open Sans', sans-serif;
    }

    .hero {
      padding: 120px 20px 100px 20px;
      text-align: center;
      background: linear-gradient(180deg,#111,#000);
    }

    h1 {
      font-family: 'Poppins', sans-serif;
      font-weight: 800;
      font-size: 56px;
      letter-spacing: -1px;
      margin-bottom: 18px;
    }

    .sub {
      font-size: 20px;
      opacity: 0.85;
      margin-bottom: 16px;
    }

    .free-note {
      font-size: 15px;
      opacity: 0.65;
      margin-bottom: 40px;
    }

    .search-box {
      max-width: 650px;
      margin: auto;
    }

    input, select, textarea {
      width: 100%;
      padding: 18px;
      border-radius: 14px;
      border: none;
      margin-bottom: 18px;
      font-size: 17px;
      font-family: 'Open Sans', sans-serif;
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    .checkbox-row {
      margin-bottom: 24px;
      font-size: 16px;
      text-align: left;
    }

    .checkbox-row input {
      margin-right: 8px;
      transform: scale(1.2);
    }

    button {
      width: 100%;
      padding: 20px;
      border-radius: 16px;
      border: none;
      font-weight: 700;
      font-size: 18px;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(90deg,#ff6a88,#ffb86c);
      color: black;
      transition: transform 0.15s ease;
    }

    button:hover {
      transform: translateY(-2px);
    }

    #results {
      padding: 80px 20px;
      max-width: 950px;
      margin: auto;
    }

    .results-header {
      margin-bottom: 50px;
    }

    .results-header h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 40px;
      margin-bottom: 10px;
    }

    .results-explainer {
      font-size: 16px;
      opacity: 0.7;
    }

    .venue-card {
      background: linear-gradient(145deg,#141414,#1f1f1f);
      padding: 32px;
      border-radius: 20px;
      margin-bottom: 32px;
      box-shadow: 0 25px 50px rgba(0,0,0,0.45);
      transition: transform 0.2s ease;
    }

    .venue-card:hover {
      transform: translateY(-5px);
    }

    .venue-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .venue-title {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .venue-title h3 {
      margin: 0;
      font-size: 26px;
      font-family: 'Poppins', sans-serif;
    }

    .venue-emoji {
      font-size: 28px;
    }

    .likelihood-badge {
      background: linear-gradient(90deg,#ff7a7a,#ffb86c);
      padding: 8px 16px;
      border-radius: 24px;
      font-size: 14px;
      font-weight: 600;
      color: black;
    }

    .venue-location {
      margin: 14px 0 8px 0;
      font-size: 16px;
      opacity: 0.75;
    }

    .venue-description {
      margin-bottom: 20px;
      font-size: 17px;
      opacity: 0.9;
    }

    .venue-actions {
      margin-top: 14px;
    }

    .action-btn {
      padding: 14px 22px;
      border-radius: 14px;
      background: linear-gradient(90deg,#ff6a88,#ffb86c);
      text-decoration: none;
      color: black;
      font-weight: 600;
      display: inline-block;
      font-family: 'Poppins', sans-serif;
    }

    .footer-panel {
      margin-top: 80px;
      padding: 80px 20px;
      text-align: center;
      background: linear-gradient(180deg,#111,#000);
    }

    .footer-panel h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 32px;
      margin-bottom: 20px;
    }

    .footer-panel p {
      max-width: 650px;
      margin: auto;
      opacity: 0.75;
      font-size: 17px;
      line-height: 1.6;
    }

  </style>
</head>

<body>

  <div class="hero">
    <h1>üé∏ Find venues faster.</h1>
    <div class="sub">Spend less time searching. Spend more time booking.</div>
    <div class="free-note">100% free. No login. No email collected.</div>

    <div class="search-box">

      <input id="city" placeholder="City (NYC, Chicago, London)" />

      <select id="genre">
        <option value="">Genre</option>
        <option>Indie</option>
        <option>Rock</option>
        <option>Pop</option>
        <option>Jazz</option>
        <option>Comedy</option>
        <option>Cabaret</option>
      </select>

      <div class="checkbox-row">
        <input type="checkbox" id="likely" />
        Only show likely to reply üëç
      </div>

      <textarea id="extra" placeholder="What else is important? (intimate rooms, 100 cap, queer-friendly, outdoor stage, etc.)"></textarea>

      <button onclick="searchVenues()">Search venues</button>

    </div>
  </div>

  <div id="results"></div>

  <div class="footer-panel">
    <h3>How venues are found</h3>
    <p>
      Pitch uses AI to surface performance venues aligned with your genre and preferences.
      It prioritizes cultural fit, emerging artist friendliness, and scene relevance.
      No scraping. No fake contact info. Just intelligent discovery.
    </p>
  </div>

  <script>

    async function searchVenues() {

      const city = document.getElementById("city").value;
      const genre = document.getElementById("genre").value;
      const likely = document.getElementById("likely").checked;
      const extra = document.getElementById("extra").value;

      if (!city) {
        alert("Enter a city.");
        return;
      }

      const res = await fetch("/api/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ city, genre, likely, extra })
      });

      const data = await res.json();

      if (!res.ok) {
        document.getElementById("results").innerHTML = "<p style='text-align:center;'>Error loading venues.</p>";
        return;
      }

      renderResults(data);
    }

    function renderResults(data) {

      const container = document.getElementById("results");

      container.innerHTML = `
        <div class="results-header">
          <h2>üé∂ Venues in ${data.city}</h2>
          <div class="results-explainer">
            Ranked by genre alignment and emerging artist friendliness.
          </div>
        </div>
      `;

      data.results.forEach(venue => {

        const likelihoodPercent = venue.likelihood * 10;

        const card = document.createElement("div");
        card.className = "venue-card";

        card.innerHTML = `
          <div class="venue-header">
            <div class="venue-title">
              <span class="venue-emoji">${venue.emoji}</span>
              <h3>${venue.name}</h3>
            </div>
            <div class="likelihood-badge">
              ${likelihoodPercent}% match
            </div>
          </div>

          <p class="venue-location">üìç ${venue.neighborhood}, ${data.city}</p>
          <p class="venue-description">${venue.description}</p>

          <div class="venue-actions">
            <a href="https://www.google.com/search?q=${venue.name} ${data.city}" target="_blank" class="action-btn">
              üîé View Venue Info
            </a>
          </div>
        `;

        container.appendChild(card);
      });
    }

  </script>

</body>
</html>
