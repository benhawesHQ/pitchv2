<!DOCTYPE html>
<html>
<head>
  <title>Pitch</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">

  <style>

    body {
      margin: 0;
      background: #0b0b0b;
      color: white;
      font-family: 'Open Sans', sans-serif;
    }

    .hero {
      padding: 80px 20px;
      text-align: center;
      background: linear-gradient(180deg,#111,#000);
    }

    h1 {
      font-family: 'Poppins', sans-serif;
      font-size: 44px;
      margin-bottom: 10px;
    }

    .sub {
      opacity: 0.75;
      margin-bottom: 30px;
    }

    .free-note {
      font-size: 13px;
      opacity: 0.6;
      margin-bottom: 30px;
    }

    .search-box {
      max-width: 600px;
      margin: auto;
    }

    input, select, textarea {
      width: 100%;
      padding: 14px;
      border-radius: 10px;
      border: none;
      margin-bottom: 14px;
      font-size: 15px;
    }

    textarea {
      resize: vertical;
      min-height: 80px;
    }

    .checkbox-row {
      margin-bottom: 18px;
      font-size: 14px;
      text-align: left;
    }

    button {
      width: 100%;
      padding: 16px;
      border-radius: 12px;
      border: none;
      font-weight: 700;
      font-size: 15px;
      cursor: pointer;
      background: linear-gradient(90deg,#ff6a88,#ffb86c);
      color: black;
    }

    #results {
      padding: 60px 20px;
      max-width: 900px;
      margin: auto;
    }

    .results-header {
      margin-bottom: 40px;
    }

    .results-header h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 32px;
    }

    .results-explainer {
      opacity: 0.7;
      font-size: 14px;
      margin-top: 8px;
    }

    .venue-card {
      background: linear-gradient(145deg,#141414,#1f1f1f);
      padding: 28px;
      border-radius: 16px;
      margin-bottom: 28px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.4);
      transition: transform 0.2s ease;
    }

    .venue-card:hover {
      transform: translateY(-4px);
    }

    .venue-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .venue-title {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .venue-title h3 {
      margin: 0;
      font-size: 22px;
      font-family: 'Poppins', sans-serif;
    }

    .venue-emoji {
      font-size: 22px;
    }

    .likelihood-badge {
      background: linear-gradient(90deg,#ff7a7a,#ffb86c);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
      color: black;
    }

    .venue-location {
      margin: 10px 0 6px 0;
      opacity: 0.7;
    }

    .venue-description {
      margin-bottom: 16px;
      opacity: 0.85;
    }

    .venue-actions {
      margin-top: 14px;
    }

    .action-btn {
      padding: 12px 18px;
      border-radius: 10px;
      background: linear-gradient(90deg,#ff6a88,#ffb86c);
      text-decoration: none;
      color: black;
      font-weight: 600;
      display: inline-block;
    }

    .footer-panel {
      margin-top: 60px;
      padding: 60px 20px;
      text-align: center;
      background: linear-gradient(180deg,#111,#000);
    }

    .footer-panel h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 28px;
      margin-bottom: 16px;
    }

    .footer-panel p {
      max-width: 600px;
      margin: auto;
      opacity: 0.75;
      font-size: 15px;
    }

  </style>
</head>

<body>

  <div class="hero">
    <h1>üé∏ Find venues faster.</h1>
    <div class="sub">Spend less time searching. Spend more time booking.</div>
    <div class="free-note">100% free. No login. No email collected.</div>

    <div class="search-box">

      <input id="city" placeholder="City (NYC, Chicago, London)" />

      <select id="genre">
        <option value="">Genre</option>
        <option>Indie</option>
        <option>Rock</option>
        <option>Pop</option>
        <option>Jazz</option>
        <option>Comedy</option>
        <option>Cabaret</option>
      </select>

      <div class="checkbox-row">
        <input type="checkbox" id="likely" />
        Only show likely to reply üëç
      </div>

      <textarea id="extra" placeholder="What else is important? (intimate rooms, 100 cap, queer-friendly, outdoor stage, etc.)"></textarea>

      <button onclick="searchVenues()">Search venues</button>

    </div>
  </div>

  <div id="results"></div>

  <div class="footer-panel">
    <h3>How venues are found</h3>
    <p>
      Pitch uses AI to analyze live performance venues in your selected city.
      It prioritizes genre alignment, emerging artist friendliness, and cultural fit.
      No scraping. No fake contact info. Just intelligent discovery.
    </p>
  </div>

  <script>

    async function searchVenues() {

      const city = document.getElementById("city").value;
      const genre = document.getElementById("genre").value;
      const likely = document.getElementById("likely").checked;
      const extra = document.getElementById("extra").value;

      if (!city) {
        alert("Enter a city.");
        return;
      }

      const res = await fetch("/api/search", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ city, genre, likely, extra })
      });

      const data = await res.json();

      if (!res.ok) {
        document.getElementById("results").innerHTML = "<p style='text-align:center;'>Error loading venues.</p>";
        return;
      }

      renderResults(data);
    }

    function renderResults(data) {

      const container = document.getElementById("results");

      container.innerHTML = `
        <div class="results-header">
          <h2>üé∂ Venues in ${data.city}</h2>
          <div class="results-explainer">
            Ranked by genre match and emerging artist friendliness.
          </div>
        </div>
      `;

      data.results.forEach(venue => {

        const likelihoodPercent = venue.likelihood * 10;

        const card = document.createElement("div");
        card.className = "venue-card";

        card.innerHTML = `
          <div class="venue-header">
            <div class="venue-title">
              <span class="venue-emoji">${venue.emoji}</span>
              <h3>${venue.name}</h3>
            </div>
            <div class="likelihood-badge">
              ${likelihoodPercent}% match
            </div>
          </div>

          <p class="venue-location">üìç ${venue.neighborhood}, ${data.city}</p>
          <p class="venue-description">${venue.description}</p>

          <div class="venue-actions">
            <a href="https://www.google.com/search?q=${venue.name} ${data.city}" target="_blank" class="action-btn">
              üîé View Venue Info
            </a>
          </div>
        `;

        container.appendChild(card);
      });
    }

  </script>

</body>
</html>
